Version 4
SHEET 1 1084 680
WIRE 416 -512 416 -544
WIRE -480 -496 -480 -544
WIRE -336 -432 -336 -464
WIRE 416 -432 416 -448
WIRE -80 -400 -80 -464
WIRE -480 -368 -480 -416
WIRE 224 -368 224 -544
WIRE -144 -352 -176 -352
WIRE 416 -336 416 -352
WIRE 448 -336 416 -336
WIRE -336 -320 -336 -352
WIRE -288 -320 -336 -320
WIRE -176 -320 -176 -352
WIRE -176 -320 -208 -320
WIRE 416 -320 416 -336
WIRE -80 -288 -80 -304
WIRE -48 -288 -80 -288
WIRE 96 -288 32 -288
WIRE 176 -288 96 -288
WIRE -336 -272 -336 -320
WIRE -80 -272 -80 -288
WIRE 224 -240 224 -272
WIRE 416 -240 416 -256
WIRE 416 -240 224 -240
WIRE -176 -224 -176 -320
WIRE -144 -224 -176 -224
WIRE -464 -192 -480 -192
WIRE -384 -192 -464 -192
WIRE -480 -128 -480 -192
WIRE -336 -128 -336 -176
WIRE -80 -128 -80 -176
WIRE 224 -96 224 -240
WIRE 288 -96 224 -96
WIRE 400 -96 368 -96
WIRE 528 -96 480 -96
WIRE -480 -16 -480 -48
WIRE -336 32 -336 0
WIRE -80 48 -80 0
WIRE 224 48 224 -96
WIRE 400 48 224 48
WIRE 224 80 224 48
WIRE -144 96 -176 96
WIRE 400 144 400 48
WIRE -336 160 -336 112
WIRE -288 160 -336 160
WIRE -176 160 -176 96
WIRE -176 160 -208 160
WIRE -80 160 -80 144
WIRE -48 160 -80 160
WIRE 96 160 32 160
WIRE 176 160 96 160
WIRE -80 176 -80 160
WIRE 224 208 224 176
WIRE -176 224 -176 160
WIRE -144 224 -176 224
WIRE -464 240 -480 240
WIRE -384 240 -464 240
WIRE -480 288 -480 240
WIRE -336 320 -336 256
WIRE -80 320 -80 272
WIRE -480 400 -480 368
FLAG 224 208 0
FLAG 528 -96 0
FLAG -480 400 0
FLAG -480 -368 0
FLAG 96 160 LS-Gate
FLAG -336 -128 0
FLAG 448 -336 U_Bootstrap
FLAG -80 -464 U_Bootstrap
FLAG -336 -464 U_Bootstrap
FLAG -480 -16 0
FLAG 400 208 0
FLAG -80 -128 0
FLAG 96 -288 HS-Gate
FLAG -80 320 0
FLAG 224 -544 UBatt
FLAG -80 0 UBatt
FLAG -336 320 0
FLAG -336 0 UBatt
FLAG 224 -96 Load
FLAG 416 -544 UBatt
FLAG -480 -544 UBatt
FLAG -464 240 LS_PWM
FLAG -464 -192 HS_PWM
SYMBOL ind 272 -80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 200µ
SYMBOL res 496 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 0.2
SYMBOL voltage -480 272 R0
WINDOW 3 -200 216 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(3.3 0 {deadtime} 10n 10n {{pwm_period}*{dc}-{2*deadtime}} {pwm_period})
SYMATTR InstName V1
SYMBOL voltage -480 -512 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 14
SYMBOL cap 400 -320 R0
SYMATTR InstName C1
SYMATTR Value 200n
SYMBOL schottky 400 -512 R0
SYMATTR InstName D1
SYMATTR Value BAT46WJ
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 400 -448 R0
SYMATTR InstName R2
SYMATTR Value 10
SYMBOL res -352 -448 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL voltage -480 -144 R0
WINDOW 3 -200 599 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 3.3 0 10n 10n {{pwm_period}*{dc}} {pwm_period})
SYMATTR InstName V3
SYMBOL zener 416 208 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -149 33 Left 2
SYMATTR InstName D2
SYMATTR Value MMBZ15VAL
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL pnp -144 -176 M180
WINDOW 0 -47 -26 Left 2
WINDOW 3 -48 -5 Left 2
SYMATTR InstName Q1
SYMATTR Value BC807-40
SYMBOL npn -144 -400 R0
WINDOW 0 -42 7 Left 2
WINDOW 3 -43 -19 Left 2
SYMATTR InstName Q2
SYMATTR Value BC817-40
SYMBOL res -192 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 470
SYMBOL res 48 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1
SYMBOL pnp -144 272 M180
WINDOW 0 -47 -26 Left 2
WINDOW 3 -48 -5 Left 2
SYMATTR InstName Q3
SYMATTR Value BC807-40
SYMBOL npn -144 48 R0
WINDOW 0 -42 7 Left 2
WINDOW 3 -43 -19 Left 2
SYMATTR InstName Q4
SYMATTR Value BC817-40
SYMBOL res -352 16 R0
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL nmos 176 -368 R0
SYMATTR InstName M3
SYMATTR Value IRF1405
SYMBOL nmos 176 80 R0
SYMATTR InstName M4
SYMATTR Value IRF1405
SYMBOL nmos -384 160 R0
SYMATTR InstName M5
SYMATTR Value 2N7002
SYMBOL res 48 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1
SYMBOL res -192 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 470
SYMBOL nmos -384 -272 R0
SYMATTR InstName M2
SYMATTR Value 2N7002
TEXT 232 488 Left 2 !.tran {pwm_period*10} startup uic
TEXT 232 424 Left 2 !.params deadtime 1u
TEXT 232 392 Left 2 !.params f_pwm 1k
TEXT 232 360 Left 2 !.params dc 0.5
TEXT 232 456 Left 2 !.params pwm_period {1/f_pwm}
TEXT 232 328 Left 2 ;.step param dc list 0.02 0.2 0.5 0.8 0.98
